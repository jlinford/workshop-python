#------------------------------------------------------------------------------
# @file Makefile
# @author jlinford
# @date 2015-04-15 21:17:47.422681
# @brief Makefile for Python-language compilation
# 
# Makefile for Python-language compilation
# 
# This file was generated by Kppa: http://www.paratools.com/Kppa
#------------------------------------------------------------------------------


CC = gcc
LD = $(CC)

OPT_FLAGS = -O3 -fopenmp
WARN_FLAGS = -Wall

CPPFLAGS = 
CFLAGS = -fPIC $(OPT_FLAGS) $(WARN_FLAGS)
LDFLAGS = $(OPT_FLAGS)
LIBS = -lm

OBJ = small_integrate.o \
      small_jacobian.o \
      small_rosenbrock.o \
      small_sparse.o \
      small_blas.o \
      small_rates.o \
      small_function.o \
      small_decomp.o \
      small_solve.o


LIB = libsmall.so
MAIN = small_main.py

all: $(LIB)

$(LIB): $(OBJ)
	$(CC) $(LDFLAGS) -shared -o $@ $(OBJ)
	@-echo "====================================================="
	@-echo "[Build successful] Run with \"python $(MAIN)\" "



small_integrate.o: small_integrate.c \
        small_parameters.h \
        small_rosenbrock.o \
        small_rosenbrock.h
	$(CC) -c $(CFLAGS) $(CPPFLAGS) -o small_integrate.o small_integrate.c 


small_jacobian.o: small_jacobian.c \
        small_parameters.h \
        small_sparse.o \
        small_sparse.h
	$(CC) -c $(CFLAGS) $(CPPFLAGS) -o small_jacobian.o small_jacobian.c 




small_rosenbrock.o: small_rosenbrock.c \
        small_parameters.h \
        small_sparse.o \
        small_sparse.h \
        small_blas.o \
        small_blas.h \
        small_rates.o \
        small_rates.h \
        small_function.o \
        small_function.h \
        small_decomp.o \
        small_decomp.h \
        small_solve.o \
        small_solve.h \
        small_jacobian.o \
        small_jacobian.h
	$(CC) -c $(CFLAGS) $(CPPFLAGS) -o small_rosenbrock.o small_rosenbrock.c 


small_sparse.o: small_sparse.c
	$(CC) -c $(CFLAGS) $(CPPFLAGS) -o small_sparse.o small_sparse.c 


small_blas.o: small_blas.c \
        small_parameters.h
	$(CC) -c $(CFLAGS) $(CPPFLAGS) -o small_blas.o small_blas.c 


small_rates.o: small_rates.c \
        small_parameters.h
	$(CC) -c $(CFLAGS) $(CPPFLAGS) -o small_rates.o small_rates.c 


small_function.o: small_function.c \
        small_parameters.h \
        small_sparse.o \
        small_sparse.h
	$(CC) -c $(CFLAGS) $(CPPFLAGS) -o small_function.o small_function.c 


small_decomp.o: small_decomp.c \
        small_parameters.h \
        small_sparse.o \
        small_sparse.h
	$(CC) -c $(CFLAGS) $(CPPFLAGS) -o small_decomp.o small_decomp.c 


small_solve.o: small_solve.c \
        small_parameters.h \
        small_sparse.o \
        small_sparse.h
	$(CC) -c $(CFLAGS) $(CPPFLAGS) -o small_solve.o small_solve.c 





clean:
	rm -f small_integrate.o small_jacobian.o small_rosenbrock.o small_sparse.o small_blas.o small_rates.o small_function.o small_decomp.o small_solve.o *.pyc
	rm -f small.exe *.so
	
destroy: clean
	rm -f __init__.py small_integrate.c small_jacobian.c small_main.py small_integrate.py small_rosenbrock.c small_sparse.c small_blas.c small_rates.c small_function.c small_decomp.c small_solve.c small_initialize.py small_monitor.py small_integrate.o small_jacobian.o small_rosenbrock.o small_sparse.o small_blas.o small_rates.o small_function.o small_decomp.o small_solve.o small_integrate.h small_jacobian.h small_integrate.py small_parameters.h small_parameters.py small_rosenbrock.h small_sparse.h small_blas.h small_rates.h small_function.h small_decomp.h small_solve.h small_initialize.py small_driver_parameters.py small_monitor.py Makefile


#----------------------------- END Makefile END -------------------------------